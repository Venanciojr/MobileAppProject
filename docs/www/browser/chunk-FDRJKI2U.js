import{a as h}from"./chunk-HJ6CGLXQ.js";import{A as W,B as j,E as T,H as k,L as M,O as _,S as B,U as H,V as $,W as F,X as L,Y as R,_ as U,a as I,c as f,d as v,e as a,ea as O,f as d,g as w,ga as z,h as y,ha as D,i as p,j as r,ja as K,k as c,l as g,n as C,o as b,p as s,q as S,r as m,x as E,z as P}from"./chunk-AUJEXBXW.js";import"./chunk-HKSNPKUY.js";import"./chunk-EGIJE37I.js";import"./chunk-DQ6V2DPB.js";import"./chunk-BWQHPFWY.js";import"./chunk-G3CV3VGG.js";import"./chunk-ZSXYZYSQ.js";import"./chunk-5MPL5A3U.js";import"./chunk-NKT2XMZU.js";import"./chunk-4U6PRYVA.js";import"./chunk-6BZ4INXC.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{i as x}from"./chunk-OYAVQN5W.js";var q=(()=>{let e=class e{constructor(i,t){this.http=i,this.storage=t,this.apiUrl="https://api.openweathermap.org/data/2.5/weather",this.apiKey="2e0e1bf9ec93015ba3e2e9729fcd45ac"}getWeatherByCoordinates(i,t,o="metric"){let u=`${this.apiUrl}?lat=${i}&lon=${t}&units=${o}&appid=${this.apiKey}`;return this.http.get(u)}};e.\u0275fac=function(t){return new(t||e)(f(j),f(h))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function J(n,e){if(n&1&&(r(0,"div")(1,"ion-card")(2,"ion-card-header")(3,"ion-card-title"),s(4),c(),r(5,"p"),s(6),c(),r(7,"p"),s(8),c()(),r(9,"ion-card-content"),g(10,"img",4),r(11,"p"),s(12),c(),r(13,"p"),s(14),c()()(),r(15,"div",5)(16,"ion-button",6),g(17,"ion-icon",7),s(18," Home "),c()()()),n&2){let l=C();a(4),S(l.weather.name),a(2),m("Temperature: ",l.weather.main.temp,"\xB0C"),a(2),m("Condition: ",l.weather.weather[0].description,""),a(2),p("src","https://openweathermap.org/img/wn/"+l.weather.weather[0].icon+"@2x.png",v),a(2),m("Feels like: ",l.weather.main.feels_like,"\xB0C"),a(2),m("Humidity: ",l.weather.main.humidity,"%"),a(2),p("routerLink","/")}}function Q(n,e){n&1&&(r(0,"ion-text")(1,"p"),s(2,"Loading weather data..."),c()())}var ne=(()=>{let e=class e{constructor(i,t,o){this.route=i,this.weatherService=t,this.storage=o,this.lat=0,this.lon=0,this.unitPreference="metric"}ngOnInit(){return x(this,null,function*(){yield this.storage.create(),this.unitPreference=(yield this.storage.get("unit"))||"metric",console.log("Unit preference:",this.unitPreference),this.route.queryParams.subscribe(i=>{this.lat=+i.lat,this.lon=+i.lon,this.lat&&this.lon&&this.fetchWeather(this.lat,this.lon)})})}fetchWeather(i,t){this.weatherService.getWeatherByCoordinates(i,t,this.unitPreference).subscribe(o=>{console.log("Weather data received:",o),this.weather=o},o=>{console.error("Error fetching weather data:",o)})}};e.\u0275fac=function(t){return new(t||e)(d(T),d(q),d(h))},e.\u0275cmp=w({type:e,selectors:[["app-weather"]],decls:8,vars:4,consts:[["loading",""],[3,"translucent"],[3,"fullscreen"],[4,"ngIf","ngIfElse"],["alt","Weather Icon",3,"src"],[1,"button-group"],["size","small","color","tertiary",3,"routerLink"],["slot","start","name","arrow-back-outline"]],template:function(t,o){if(t&1&&(r(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-title"),s(3,"Weather"),c()()(),r(4,"ion-content",2),y(5,J,19,7,"div",3)(6,Q,3,0,"ng-template",null,0,E),c()),t&2){let u=b(7);p("translucent",!0),a(4),p("fullscreen",!0),a(),p("ngIf",o.weather)("ngIfElse",u)}},dependencies:[K,B,O,$,L,F,H,R,U,z,D,W,P,_,M,k],styles:[".button-group[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:10px;margin-top:20px}ion-button[_ngcontent-%COMP%]{--border-radius: 8px;padding:5px 10px}"]});let n=e;return n})();export{ne as WeatherPage};
